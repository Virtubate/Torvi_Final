import React from 'react'
import { Link, useNavigate } from 'react-router-dom'
import './Header.css'

const CompanyWordmark = ({ className = 'h-6 w-auto' }) => (
  <svg className={className} viewBox="0 0 1024 736" xmlns="http://www.w3.org/2000/svg" aria-hidden>
    <path fill="currentColor" d="M415.212097,473.450378 C372.117523,480.377045 327.807068,454.131714 326.800781,402.292877 C326.277466,375.335785 335.994995,352.906708 359.183014,338.007812 C395.201813,314.864868 444.203278,325.935333 465.591827,363.026581 C487.338104,400.738220 473.556580,462.810913 415.212097,473.450378 M440.023499,399.510651 C439.903168,396.684082 439.867706,393.850952 439.648651,391.032043 C438.358704,374.432281 427.296844,361.066498 411.368500,356.796478 C394.946075,352.394043 378.514587,358.131683 368.994995,371.592743 C358.724762,386.115204 357.931976,412.595581 367.314728,427.717773 C382.248993,451.787354 419.248383,452.156128 433.546753,428.306335 C438.658630,419.779602 440.277588,410.325104 440.023499,399.510651 z"/>
    <path fill="currentColor" d="M741.930481,329.783203 C753.766541,329.750458 754.266968,328.447571 749.282654,340.201843 C731.411316,382.346832 713.497864,424.474030 695.714233,466.655975 C694.265564,470.092224 692.317444,471.486572 688.580627,471.367920 C680.925903,471.124878 673.257019,471.165894 665.597839,471.305084 C662.465637,471.362000 660.734863,470.150146 659.554077,467.277557 C646.009277,434.328552 632.400024,401.406006 618.773071,368.490875 C614.188843,357.417969 609.429199,346.417267 604.903809,335.320679 C602.966614,330.570526 603.572754,329.841858 608.747009,329.813110 C616.575256,329.769562 624.415344,330.049805 632.227783,329.694305 C636.472107,329.501129 638.580078,331.099945 640.029236,334.909821 C649.734619,360.426147 659.576538,385.890564 669.372620,411.372375 C671.989197,418.178711 674.601013,424.986938 677.726990,433.127716 C681.202576,424.322113 684.136475,416.816498 687.124390,409.332489 C696.876587,384.905670 706.739807,360.522491 716.330200,336.032410 C718.093750,331.528961 720.341370,329.287323 725.461975,329.725311 C730.752197,330.177917 736.113525,329.800354 741.930481,329.783203 z"/>
    <path fill="currentColor" d="M261.915283,296.618347 C269.262573,296.722290 269.271393,296.722260 269.298218,303.588806 C269.324280,310.254272 269.667236,316.941681 269.236847,323.578339 C268.894714,328.854431 270.956970,330.133270 275.845673,329.942505 C284.831207,329.591949 293.847595,330.032837 302.833344,329.684906 C307.309875,329.511597 308.853363,331.328522 308.825775,335.422180 C308.787659,341.079041 308.791443,346.737396 308.879852,352.393494 C308.936707,356.031738 307.270996,357.335327 303.673889,357.272827 C294.345001,357.110748 285.005920,357.406219 275.682098,357.134735 C271.046722,356.999786 269.201752,358.305084 269.260498,363.283966 C269.496460,383.277618 269.293091,403.276001 269.363281,423.272217 C269.430939,442.536621 278.244598,448.902374 296.601898,443.093719 C302.798401,441.132965 303.039124,441.202850 304.963898,447.330109 C306.509979,452.252014 307.759644,457.268860 309.372009,462.167480 C310.333984,465.089996 309.636169,467.016632 306.860565,468.220367 C289.534210,475.734497 271.890747,477.465302 254.788818,468.468384 C240.787979,461.102905 236.201218,447.450500 235.840836,432.686157 C235.283890,409.869843 235.645782,387.031067 235.617279,364.201813 C235.608536,357.193542 235.607452,357.193451 228.793716,357.188171 C225.127731,357.185333 221.460144,357.115479 217.796249,357.201752 C214.812531,357.272003 213.591995,355.890076 213.622940,352.973816 C213.690109,346.642334 213.692322,340.309235 213.630386,333.977661 C213.601776,331.052002 214.822281,329.722870 217.819672,329.792969 C222.316162,329.898102 226.819138,329.724396 231.315720,329.827942 C234.537384,329.902130 235.753906,328.479095 235.712341,325.310608 C235.609634,317.480194 235.828354,309.644257 235.649628,301.816650 C235.560471,297.911835 237.052216,296.465271 240.931503,296.575470 C247.757889,296.769348 254.593948,296.621643 261.915283,296.618347 z"/>
    <path fill="currentColor" d="M497.902466,421.000000 C498.149658,408.178528 497.840240,395.859497 498.634613,383.532349 C500.224487,358.861206 511.516663,341.397003 534.973206,332.268707 C553.052612,325.232971 571.193665,324.208832 589.664246,330.569733 C593.723694,331.967743 595.213684,333.864014 593.595703,338.322418 C591.328064,344.571136 589.643066,351.042297 587.931152,357.477448 C586.958130,361.134705 585.407715,361.828461 581.873291,360.209351 C574.310059,356.744659 566.181946,355.386139 557.963501,356.560028 C541.057007,358.974884 532.415955,369.693512 532.112244,388.985229 C531.787048,409.644867 532.020447,430.313263 532.005981,450.977814 C532.002563,455.810547 531.862793,460.646881 532.007751,465.474915 C532.130737,469.569489 530.823975,471.575684 526.276733,471.393951 C518.789429,471.094666 511.274963,471.124695 503.784546,471.381958 C499.348114,471.534332 497.957397,469.700256 497.984192,465.495209 C498.077606,450.830902 497.946777,436.165192 497.902466,421.000000 z"/>
    <path fill="currentColor" d="M770.025574,388.000000 C770.040710,370.670197 770.046021,353.840332 770.078735,337.010559 C770.091431,330.502716 770.725220,329.892029 777.220520,329.873352 C783.885803,329.854218 790.551086,329.851959 797.216370,329.835510 C803.595825,329.819733 803.989868,330.117554 804.002075,336.607513 C804.067932,371.600372 804.087708,406.593292 804.116699,441.586212 C804.123474,449.751190 804.006897,457.917816 804.140869,466.080475 C804.202881,469.861267 802.889282,471.504944 798.901367,471.382477 C791.409668,471.152405 783.899109,471.096191 776.410522,471.363800 C771.604919,471.535553 769.881348,469.688660 770.035034,464.947906 C770.861145,439.467682 769.925720,413.983276 770.025574,388.000000 z"/>
    <path fill="currentColor" d="M786.997192,269.602173 C799.911072,270.472595 808.705322,279.805206 808.025330,291.438660 C807.366760,302.703949 797.774780,312.070099 787.277405,311.698090 C775.170044,311.269073 766.122253,302.210358 765.920837,290.315796 C765.732361,279.189606 774.481750,270.403625 786.997192,269.602173 z"/>
  </svg>
);

const CompanyGlyph = ({ className = 'h-6 w-6' }) => (
  <svg className={className} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
    <path d="M11.5 13.8H10.1299C8.72143 13.8 8.01721 13.8 7.72228 13.3385C7.42735 12.8769 7.72321 12.2379 8.31493 10.9597L11.0463 5.06006C11.4205 4.25182 11.6075 3.8477 11.8038 3.89091C12 3.93413 12 4.37946 12 5.27013V9.7C12 9.9357 12 10.0536 12.0732 10.1268C12.1464 10.2 12.2643 10.2 12.5 10.2H13.8701C15.2786 10.2 15.9828 10.2 16.2777 10.6615C16.5726 11.1231 16.2768 11.7621 15.6851 13.0402L12.9537 18.9399C12.5795 19.7482 12.3925 20.1523 12.1962 20.1091C12 20.0659 12 19.6205 12 18.7299V14.3C12 14.0643 12 13.9464 11.9268 13.8732C11.8536 13.8 11.7357 13.8 11.5 13.8Z" fill="currentColor"/>
  </svg>
);

const Header = () => {
  const navigate = useNavigate()
  const [isVisible, setIsVisible] = React.useState(true)
  const [lastScrollY, setLastScrollY] = React.useState(0)

  React.useEffect(() => {
    const controlNavbar = () => {
      const currentScrollY = window.scrollY

      if (currentScrollY < 10) {
        // Always show navbar at the top
        setIsVisible(true)
      } else if (currentScrollY > lastScrollY) {
        // Scrolling down - hide navbar
        setIsVisible(false)
      } else {
        // Scrolling up - show navbar
        setIsVisible(true)
      }

      setLastScrollY(currentScrollY)
    }

    window.addEventListener('scroll', controlNavbar)
    return () => window.removeEventListener('scroll', controlNavbar)
  }, [lastScrollY])

  const handleFeaturesClick = () => {
    // Navigate to home first if not already there
    if (window.location.pathname !== '/') {
      navigate('/')
      // Wait for navigation to complete, then scroll
      setTimeout(() => {
        const featuresSection = document.querySelector('#features-dashboard')
        if (featuresSection) {
          featuresSection.scrollIntoView({ 
            behavior: 'smooth',
            block: 'start'
          })
        }
      }, 100)
    } else {
      const featuresSection = document.querySelector('#features-dashboard')
      if (featuresSection) {
        featuresSection.scrollIntoView({ 
          behavior: 'smooth',
          block: 'start'
        })
      }
    }
  }

  const handleCompanyClick = () => {
    navigate('/company')
  }

  const handleTalkToUsClick = () => {
    navigate('/talk-to-us')
  }

  return (
    <header className={`header ${!isVisible ? 'header-hidden' : ''}`}>
      <div className="container">
        <nav className="nav">
          <div className="nav-left">
            <Link to="/" className="logo">
              <CompanyGlyph className="logo-glyph" />
              <CompanyWordmark className="logo-wordmark" />
            </Link>
            <div className="nav-links">
              <div className="dropdown">
                <button className="dropdown-btn" onClick={handleFeaturesClick}>Features</button>
              </div>
              <div className="dropdown">
                <button className="dropdown-btn" onClick={handleCompanyClick}>Company</button>
              </div>
            </div>
          </div>
          <div className="nav-right">
            <a href="#" className="nav-link">Sign in</a>
            <button className="btn-primary" onClick={handleTalkToUsClick}>Talk to us</button>
          </div>
        </nav>
      </div>
    </header>
  )
}

export default Header

